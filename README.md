# Исполнитель команд (bash-скриптов)
## postgres-command-executor
[Ссылка на оригинал тестового задания](https://gist.github.com/ixpectus/aec3f753a3209fbd8100c1b2c42d5756) 
## Используемые технологии:
 - **OS**: Linux
   - *Дистрибутив*: Arch Linux
 - **Язык программирования**: Go v1.22.1
 - **БД**: Postgres v16.2
 - **Сторонние библиотеки**:
   - *[google uuid](https://github.com/google/uuid)* - реализация UUID для Golang
   - *[godotenv](https://github.com/joho/godotenv)* - загрузчик переменных окружения
   - *[lib/pq](https://github.com/lib/pq)* - драйвер PostgreSQL для Golang пакета `database/sql`
   - *[testify](https://github.com/stretchr/testify)* - набор утилит для упрощения тестирования. Одной из причин использования этой библиотеки было тестирование с использованием mock объектов, реализация которых зависит от testify
 - **Утилиты**:
   - *[migrate](https://github.com/golang-migrate/migrate)* - утилита создания файлов миграции и накатывания миграций на базу данных
   - *[mockery](https://github.com/vektra/mockery)* - утилита для создания mock объектов, необходимых для unit-тестирования
 - **Docker** - приложение собирается в контейнер (об этом ниже), в качестве базы данных используется готовый docker-образ Postgres
 
## Функционал
В приложении присутствуют две сущности, разбитые по соответствующим точкам входа 
### Команды (commands)
Команда из себя представляет bash-скрипт, точнее код скрипта, который в дальнейшем может быть исполнен. Доступны действия: 

 - Сохранение новой команды
 - Получение списка уже сохраненных команд
 - Получение конкретной команды по `id`
 - Удаление конкретной команды по `id`.

### Процессы (processes) 
После сохранения команды, ее можно исполнить. Таким образом будет порожден процесс - исполняемая сохраненная команда. Пользователь отправляет `id` команды, которую он хочет исполнить. Если при запуске команды не произошло ошибок, то вернется идентификатор процесса - UUID. По этому идентификатору можно отслеживать информацию о запущенной команде:

 - Вывод команды (stdout)
 - Ошибки команды (stderr)
 - Статус команды (выполняется, завершена, завершена с ошибкой)
 - Код ошибки

Процесс можно остановить вместе с удалением всего результата работы. Это сделано с целью сохранения идемпотентности метода `DELETE`. Для остановки и удаления процесса достаточно знать его `id`. Если процесс был уже завершен, то удалится результат его работы. 

## Сборка и запуск приложения

## Дополнительно
Для получения дополнительной информации о проекте можно посмотреть:

 - **[ADR](https://github.com/fatalistix/postgres-command-executor/tree/main/docs/architecture/decisions)** - Architecture Decision Records - архитектурные решения в проекте с пояснениями
 - **[Схему запросов Postman](https://github.com/fatalistix/postgres-command-executor/tree/main/docs/postman)**
