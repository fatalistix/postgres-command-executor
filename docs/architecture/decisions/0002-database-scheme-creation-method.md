# 2. Database scheme creation method

Date: 2024-05-01

## Status

Accepted

## Context

Нужно выбрать способ создания схемы (таблиц) в базе данных. 

Существует 3 основных подхода к решению данной проблемы:
 - Использование идемпотентных запросов (`CREATE TABLE IF NOT EXISTS...`)
 - Использование СУБД для задания схемы
 - Использование миграций

Стоит также помнить, что в проекте должно быть по-минимуму сторонних зависимостей

## Decision

В качестве способа создания схемы была выбрана утилита [migrate](https://github.com/golang-migrate/migrate). Она позволяет без использования сторонних зависимостей в коде применить миграции, заранее заготовленные в виде sql-скриптов в определенном формате

## Consequences

Схема будет создана явна с использованием SQL-скриптов. Все файлы формата `.sql` будут расположены в одном месте. `migrate` позаботится о "накатывании" миграций. Миграции будут "накатываться" двумя способами: с помощью cli-утилиты, и с помощью обертки в виде docker-контейнера
