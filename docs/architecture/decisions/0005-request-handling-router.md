# 5. Request handling router

Date: 2024-05-22

## Status

Accepted

## Context

Для каждого типа запросов должны быть свой обработчики. А для того, чтобы правильно выбирать обработчик, нужен "роутер", который будет сопоставлять маршрут и конкретный обработчик

На выбор есть несколько кандидатов:
1. Использовать SDK и всю обработку писать вручную. Стандартный обработчик обладает довольно бедным функционалом, но при этом он удовлетворяет требованию о минимальном числе зависимостей.
2. Использовать готовые "роутеры": `gorilla`, `gin`, `chi-router` и так далее. У каждого из них есть несколько недостатков, самый главный из которых - сторонние библиотеки. Также многие из них предоставляют полностью свою экосистему обработки запросов, местами более удобную, конечно. Но в проекте нужно такого по-минимуму
3. Самый неожиданный вариант - новый "роутер" из последнего мажорного релиза SDK v1.22. `ServeMux` дизайном напоминает "роутер" от `gorilla`, то есть он добавляет необходимый функционал к встроенному обработчику маршрутов, позволяя оставаться в рамках SDK

P.S. слово "роутер" в кавычках потому, что это дословное произношение оригинального английского слова.

## Decision

Довольно очевидное решение - использовать новый обработчик маршрутов из SDK, плюсы которого описаны выше.

## Consequences

Система не приобретает сторонних зависимостей, обработка запросов остается в старом стиле (без новшеств фреймворков), но при этом убирается рутинная ручная маршрутизация. 